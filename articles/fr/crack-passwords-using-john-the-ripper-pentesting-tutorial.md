---
title: Comment craquer des mots de passe avec John The Ripper – Tutoriel de Pentesting
subtitle: ''
author: Manish Shivanandhan
co_authors: []
series: null
date: '2022-11-17T18:13:08.000Z'
originalURL: https://freecodecamp.org/news/crack-passwords-using-john-the-ripper-pentesting-tutorial
coverImage: https://www.freecodecamp.org/news/content/images/2022/11/john-the-ripper.png
tags:
- name: information security
  slug: information-security
- name: '#infosec'
  slug: infosec
- name: penetration testing
  slug: penetration-testing
seo_title: Comment craquer des mots de passe avec John The Ripper – Tutoriel de Pentesting
seo_desc: 'If you are a pen-tester, cracking passwords is something you will be doing
  on a daily basis. This can include login passwords, file passwords, and almost anything
  that is protected using a password.

  John the Ripper (JtR) is a popular password-crackin...'
---

Si vous êtes un testeur d'intrusion, craquer des mots de passe est une activité que vous ferez quotidiennement. Cela peut inclure des mots de passe de connexion, des mots de passe de fichiers, et presque tout ce qui est protégé par un mot de passe.

John the Ripper (JtR) est un outil populaire de craquage de mots de passe. John supporte de nombreuses technologies de chiffrement pour les systèmes Windows et Unix (Mac inclus).

Une caractéristique remarquable de John est qu'il peut détecter automatiquement le chiffrement pour les formats courants. Cela vous fera gagner beaucoup de temps dans la recherche des formats de hachage et la recherche de l'outil correct pour les craquer.

John est également un outil basé sur un dictionnaire. Cela signifie qu'il fonctionne avec un dictionnaire de mots de passe courants pour le comparer avec le hachage en main. Voici une liste de mots de passe courants appelée [rockyou.txt](https://github.com/praetorian-inc/Hob0Rules/blob/master/wordlists/rockyou.txt.gz).

Bien que vous puissiez utiliser des listes de mots populaires comme RockYou, John dispose également de son propre ensemble de listes de mots avec des milliers de mots de passe courants. Cela rend John très efficace pour craquer des systèmes avec des mots de passe faibles.

Voici comment John fonctionne par défaut :

* reconnaître le type de hachage du hachage actuel
* générer des hachages à la volée pour tous les mots de passe du dictionnaire
* s'arrêter lorsqu'un hachage généré correspond au hachage actuel.

Ce n'est pas la seule façon pour John de trouver un mot de passe. Vous pouvez également personnaliser John en fonction de vos besoins. Par exemple, vous pouvez spécifier le format du mot de passe en utilisant le drapeau de format.

Dans cet article, nous allons d'abord installer John, puis passer en revue les différents modes que vous pouvez utiliser. Nous utiliserons ensuite John pour craquer des mots de passe pour trois cas d'utilisation différents : un mot de passe Windows, un mot de passe Linux et un mot de passe de fichier zip.

Un **avertissement rapide** avant de commencer : n'utilisez pas cet outil à des fins malveillantes. Ceci est destiné à être un tutoriel éducatif pour vous aider à vous protéger, vous et vos clients ou votre équipe, contre les attaques par mot de passe. Utilisez ces informations de manière responsable et sûre !

Commençons à craquer.

## Comment installer John the Ripper

Si vous utilisez Kali Linux, John est préinstallé. Vous pouvez utiliser John en tapant la commande suivante :

```
$ john
```

Pour Ubuntu/Debian, vous pouvez obtenir John à partir de la source apt. Voici la commande pour installer John dans Ubuntu :

```
$ apt install john
```

Sur Mac, vous pouvez trouver John dans [Homebrew](https://brew.sh/) :

```
$ brew install john
```

Pour Windows et d'autres systèmes d'exploitation, vous pouvez [trouver les binaires ici](https://www.openwall.com/john/).

Une fois que vous avez installé John, essayez la commande d'aide pour vous assurer que votre installation fonctionne. La commande d'aide peut également être utilisée comme référence lors de l'utilisation de John.

```
$ john -h
```

Voici la sortie de la commande d'aide :

![Image](https://www.freecodecamp.org/news/content/images/2022/11/image-89.png)
_Commande d'aide de John_

## Comment utiliser John the Ripper

Maintenant que nous savons ce qu'est John, examinons les trois modes qu'il vous offre. Vous utiliserez l'un de ces trois modes pour la plupart de vos cas d'utilisation.

* Mode de craquage unique
* Mode de liste de mots
* Mode incrémental

Examinons chacun d'eux en détail.

### Qu'est-ce que le mode de craquage unique ?

En mode de craquage unique, John prend une chaîne et génère des variations de cette chaîne afin de générer un ensemble de mots de passe.

Par exemple, si notre nom d'utilisateur est "stealth" et le mot de passe est "StEaLtH", nous pouvons utiliser le mode unique de John pour générer des variations de mot de passe (STEALTH, Stealth, STealth, etc.).

Nous utilisons le drapeau "format" pour spécifier le type de hachage et le drapeau "single" pour indiquer à John que nous voulons utiliser le mode de craquage unique. Nous allons également créer un fichier crack.txt qui contiendra le nom d'utilisateur et la valeur de hachage du mot de passe.

```
stealth:d776dd32d662b8efbdf853837269bd725203c579
```

Nous pouvons maintenant utiliser la commande suivante pour utiliser le mode de craquage unique de John :

```
$ john --single --format=raw-sha1 crack.txt
```

Et voici le résultat. Vous pouvez voir que John a réussi à trouver le mot de passe correct "StEaLtH".

![Image](https://www.freecodecamp.org/news/content/images/2022/11/image-90.png)
_Mode de craquage unique de John_

C'était amusant, n'est-ce pas ? Maintenant, examinons le mode dictionnaire pour craquer des mots de passe plus compliqués.

### Qu'est-ce que le mode dictionnaire ?

En mode dictionnaire, nous fournirons à John une liste de mots de passe. John générera des hachages pour ceux-ci à la volée et les comparera avec notre hachage de mot de passe.

Pour cet exemple, nous utiliserons la liste de mots RockYou. Si vous utilisez Kali, vous pouvez la trouver à /usr/share/wordlists/rockyou.txt. Nous aurons également un fichier crack.txt avec simplement le hachage du mot de passe.

```
edba955d0ea15fdef4f61726ef97e5af507430c0
```

Voici la commande pour exécuter John en mode dictionnaire en utilisant la liste de mots.

```
$ john --wordlist=/usr/share/wordlists/rockyou.txt --format=raw-sha1 crack.txt
```

Et John trouve le mot de passe assez rapidement.

![Image](https://www.freecodecamp.org/news/content/images/2022/11/image-91.png)
_Mode de liste de mots de John_

Plus le mot de passe est faible, plus John peut le découvrir rapidement. C'est pourquoi il est toujours recommandé d'avoir des mots de passe forts.

### Qu'est-ce que le mode incrémental ?

Le mode incrémental est le mode le plus puissant fourni par John. Il essaie toutes les combinaisons de caractères possibles comme mots de passe.

Cela semble génial, mais il y a un problème. Le craquage peut durer très longtemps si le mot de passe est trop long ou s'il s'agit d'une combinaison de caractères alphanumériques et de symboles.

Vous utiliserez rarement ce mode sauf si vous n'avez pas d'autre option. Dans les cas typiques, une combinaison d'attaques d'ingénierie sociale et du mode de liste de mots vous aidera à craquer la plupart des hachages.

Si vous souhaitez essayer le mode incrémental, voici la syntaxe.

```
$ john -i:digits passwordfile.txt
```

Ici, le drapeau -i indique à John que nous voulons utiliser le mode incrémental. Le marqueur "digits" peut être utilisé pour définir le nombre maximum de chiffres dans le mot de passe.

Vous pouvez également ajouter l'option "format" pour faciliter le démarrage du craquage par John.

## Cas d'utilisation pour John the Ripper

Maintenant que vous comprenez les différents modes de John, examinons quelques cas d'utilisation.

Nous allons utiliser John pour craquer trois types de hachages : un mot de passe Windows NTLM, un mot de passe shadow Linux et le mot de passe d'un fichier zip.

### Comment craquer un mot de passe Windows

Commençons par Windows. Dans Windows, les hachages de mots de passe sont stockés dans la [base de données SAM](https://en.wikipedia.org/wiki/Security_Account_Manager). SAM utilise le format de hachage LM/NTLM pour les mots de passe, nous allons donc utiliser John pour en craquer un.

L'obtention de mots de passe à partir de la base de données SAM est hors du cadre de cet article, mais supposons que vous avez acquis un hachage de mot de passe pour un utilisateur Windows.

Voici la commande pour le craquer :

```
$ john --format=lm crack.txt
```

Le fichier crack.txt contiendra le hachage du mot de passe. Si John est incapable de craquer le mot de passe en utilisant sa liste de mots par défaut, vous pouvez utiliser la liste de mots RockYou en utilisant le drapeau de liste de mots.

### Comment craquer un mot de passe Linux

Maintenant, craquons un mot de passe Linux. Dans Linux, il y a deux fichiers importants enregistrés dans le dossier /etc : passwd et shadow.

* /etc/passwd -> stocke des informations comme le nom d'utilisateur, l'identifiant de l'utilisateur, le shell de connexion, etc.
* /etc/shadow -> contient le hachage du mot de passe, l'expiration du mot de passe, etc.

En plus de la commande "john", John est livré avec quelques autres utilitaires. L'un d'eux s'appelle "unshadow".

La commande unshadow combine les fichiers passwd et shadow en un seul fichier. Cela peut ensuite être utilisé par John pour craquer des mots de passe.

Voici comment nous utilisons la commande unshadow :

```
$ unshadow /etc/passwd /etc/shadow > output.db
```

Cette commande combinera les fichiers ensemble et créera un fichier output.db. Nous pouvons maintenant craquer le fichier output.db en utilisant John.

```
$ john output.db
```

John essaie de trouver le mot de passe pour tous les utilisateurs dans le fichier passwd et génère la sortie avec la liste des mots de passe craqués. Encore une fois, vous pouvez utiliser des listes de mots personnalisées via le drapeau de liste de mots.

### Comment craquer un mot de passe de fichier Zip

Enfin, craquons un mot de passe de fichier zip. Pour cela, nous devons d'abord obtenir le hachage du mot de passe du fichier zip.

Comme unshadow, John a un autre utilitaire appelé zip2john. zip2john nous aide à obtenir le hachage à partir des fichiers zip. Si vous craquez un fichier .rar, vous pouvez utiliser l'utilitaire rar2john.

Voici la syntaxe pour obtenir le hachage du mot de passe d'un fichier zip :

```
$ zip2john file.zip > zip.hashes
```

La commande ci-dessus obtiendra le hachage à partir du fichier zip et le stockera dans le fichier zip.hashes. Vous pouvez ensuite utiliser John pour craquer le hachage.

```
$ john zip.hashes
```

John dispose également de plusieurs autres fonctionnalités qui vous aideront à craquer une variété de mots de passe. Vous pouvez trouver [la documentation complète pour John](https://www.openwall.com/john/doc/) ici.

## Comment se défendre contre les attaques par mot de passe

Jusqu'à présent, nous avons vu comment craquer des mots de passe avec John the Ripper. Mais comment nous défendre contre ces types d'attaques par force brute ?

La manière la plus simple de se défendre contre les attaques par mot de passe est de définir un mot de passe fort. Plus le mot de passe est fort, plus il est difficile à craquer.

La deuxième étape consiste à arrêter d'utiliser les mêmes mots de passe pour plusieurs sites. Si un site est piraté, votre mot de passe sera exposé sur Internet. Un pirate peut ensuite utiliser la combinaison email/mot de passe pour tester vos identifiants sur d'autres sites. Vous pouvez vérifier [si votre mot de passe est sur Internet](https://haveibeenpwned.com/) ici.

La dernière étape consisterait à générer des mots de passe aléatoires et à utiliser un gestionnaire de mots de passe. Il existe une variété d'options, y compris le gestionnaire de mots de passe intégré de Chrome [Google password manager](https://passwords.google.com/). Si vous utilisez un mot de passe fort pour chaque site que vous utilisez, il devient extrêmement difficile de craquer votre mot de passe.

## Résumé

John est un outil populaire et puissant de craquage de mots de passe. Il est souvent utilisé par les testeurs d'intrusion et les pirates informatiques à des fins diverses et pour sa facilité d'utilisation.

De la découverte automatique des hachages aux attaques basées sur un dictionnaire, John est un excellent outil à avoir dans votre boîte à outils de pentesting.

J'espère que cet article vous a aidé à comprendre John the Ripper en détail. Vous pouvez [me contacter ici](https://www.linkedin.com/in/manishmshiva/) ou [visiter mon blog ici](https://stealthsecurity.io/).