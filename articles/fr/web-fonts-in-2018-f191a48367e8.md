---
title: Comment charger les polices web pour éviter les problèmes de performance et
  accélérer le chargement des pages
subtitle: ''
author: freeCodeCamp
co_authors: []
series: null
date: '2018-12-17T08:43:58.000Z'
originalURL: https://freecodecamp.org/news/web-fonts-in-2018-f191a48367e8
coverImage: https://cdn-media-1.freecodecamp.org/images/1*ZPpEmhu_L3ndWMaMnwoJUg.png
tags:
- name: CSS
  slug: css
- name: optimization
  slug: optimization
- name: performance
  slug: performance
- name: 'tech '
  slug: tech
- name: Web Development
  slug: web-development
seo_title: Comment charger les polices web pour éviter les problèmes de performance
  et accélérer le chargement des pages
seo_desc: 'By Mattia Astorino

  Custom web fonts are used everywhere around the world, but many (oh so many) sites
  load them improperly. This causes a lot of problems for page loading like performance
  issues, slow loading time, blocked rendering and swapped fonts...'
---

Par Mattia Astorino

Les polices web personnalisées sont utilisées partout dans le monde, mais de nombreux (oh, tant de) sites les chargent incorrectement. Cela provoque de nombreux problèmes pour le chargement des pages, comme des problèmes de performance, un temps de chargement lent, un rendu bloqué et des polices échangées pendant la navigation.

Je vois de nombreux développeurs ignorer ces problèmes ou peut-être commettre les mêmes erreurs encore et encore simplement parce qu'ils ont toujours fait ainsi, mais en tant que développeurs web, nous devons être capables de nous adapter dans un environnement en constante évolution.

Il est temps de briser cette boucle et de commencer à faire les choses correctement en 2019. Il y a seulement quatre étapes à considérer lors du chargement d'une police web personnalisée :

* Utiliser le bon format de police
* Pré-charger les polices
* Utiliser la bonne déclaration font-face
* Éviter le texte invisible pendant le chargement de la police.

Analysons ces points un par un.

### Utiliser le bon format de police

Il existe de nombreux formats de polices qui peuvent être utilisés sur le web, mais seulement deux formats sont vraiment nécessaires si vous n'avez pas à supporter Internet Explorer (IE) 8 ou inférieur : [**woff**](https://caniuse.com/#search=woff) et [**woff2**](https://caniuse.com/#search=woff2). Ce sont les deux seuls types de fichiers que vous devriez utiliser car ils sont compressés au format gzip par défaut (donc ils sont très petits), sont optimisés pour le web et sont entièrement supportés par IE 9+ et tous les autres navigateurs evergreen.

### Pré-charger les polices

Lorsque vous utilisez des polices personnalisées, vous devez indiquer au navigateur de les pré-charger en utilisant la balise `rel=""` et les attributs appropriés :

```
<link rel="preload" as="font" href="/fonts/custom-font.woff2" type="font/woff2" crossorigin="anonymous">
```

```
<link rel="preload" as="font" href="/fonts/custom-font.woff" type="font/woff2" crossorigin="anonymous">
```

_Notez que l'utilisation de crossorigin ici est `importante` ; sans cet attribut, la police pré-chargée est ignorée par le navigateur, et une nouvelle requête est effectuée. Cela est dû au fait que les polices sont censées être récupérées anonymement par le navigateur, et la requête de pré-chargement n'est rendue anonyme qu'en utilisant cet attribut._

Dans l'exemple ci-dessus, les attributs `rel="preload" as="font"` demanderont au navigateur de commencer à télécharger la ressource _requise_ dès que possible. Ils indiquent également au navigateur qu'il s'agit d'une police, afin qu'il puisse la prioriser de manière appropriée dans sa file de ressources. L'utilisation des [indications de pré-chargement](https://developers.google.com/web/fundamentals/performance/resource-prioritization?hl=en#preload) aura un impact dramatique sur les performances des polices web et le chargement initial de la page. Les navigateurs qui supportent les indications de pré-chargement et de pré-récupération commenceront à télécharger les polices web dès qu'ils auront vu l'indication dans le fichier HTML et n'auront plus besoin d'attendre le CSS.

Vous pouvez plutôt utiliser l'attribut `rel="prefetch"` pour indiquer au navigateur de préparer le téléchargement des ressources qui pourraient être nécessaires plus tard pendant le chargement de la page ou les actions de l'utilisateur, afin qu'il attribue une faible priorité à ces ressources.

**ATTENTION :**  
Si vous utilisez un CDN comme Google Fonts, assurez-vous que les fichiers de police que vous pré-chargez correspondent à ceux du CSS. Les polices peuvent également être régulièrement mises à jour, et si vous pré-chargez une ancienne version tout en utilisant le CSS pour une version plus récente, vous pourriez finir par télécharger deux versions de la même police et gaspiller la bande passante de vos utilisateurs. Envisagez d'utiliser `[<link rel="preconnect">](https://developers.google.com/web/fundamentals/performance/resource-prioritization?hl=en#preconnect)` à la place pour une maintenance plus facile.

### Déclaration correcte de font-face

Déclarer une famille de polices font-face est très simple, mais nous devons prendre soin de certaines choses lorsque nous le faisons. Voici un exemple correct de déclaration d'une famille de polices personnalisée :

```
@font-face {  font-family: 'Custom Font';  font-weight: 400;  font-style: normal;  font-display: swap; /* Lire le point suivant */  unicode-range: U+000-5FF; /* Télécharger uniquement les glyphes latins */  src: local('Custom Font'),       url('/fonts/custom-font.woff2') format('woff2'),        url('/fonts/custom-font.woff') format('woff');}
```

Voici la plage Unicode de [Google Web Fundamentals](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/webfont-optimization?hl=en#unicode-range_subsetting).

Comme vous pouvez le voir, nous utilisons uniquement des polices optimisées (**woff** et **woff2**) et nous indiquons au navigateur de **charger** uniquement la plage de glyphes requise (de `U+000` à `U+5FF`), _mais cette propriété n'empêche pas les navigateurs de télécharger la police entière_. Il y a également deux autres choses à noter, la fonction `local()` et l'ordre de déclaration de la police.

La fonction `local()` permet aux utilisateurs d'utiliser leur copie locale de la police si elle est présente (par exemple, pensez aux polices Roboto qui sont préinstallées sur Android) au lieu de la télécharger.

L'ordre de déclaration de la police est également important car le navigateur commencera à récupérer les ressources en suivant l'ordre de déclaration. Si le navigateur supporte le format woff2, il téléchargera la police, ou s'il ne reconnaît pas le format de la ressource, il passera à la suivante, et ainsi de suite.

_Si vous souhaitez vraiment utiliser les polices `eot` et `ttf`, assurez-vous de les ajouter à la fin de la déclaration `src`._

#### Ressources

* [Générateur de plage de glyphes](https://codepen.io/elifitch/pen/Ljqway) par Eli Fitch
* [Générateur moderne de Font Face](https://transfonter.org/)

### Éviter le texte invisible pendant le chargement de la police

Les polices sont souvent des fichiers volumineux qui prennent un certain temps à se charger, même lorsqu'ils sont compressés avec gzip. Pour gérer cela, certains navigateurs masquent le texte jusqu'à ce que la police soit chargée (le "flash de texte invisible"). Vous pouvez éviter le "flash" et montrer le contenu aux utilisateurs immédiatement en utilisant une police système initialement, puis en la remplaçant.

Dans l'exemple précédent de `@font-face`, vous remarquerez la déclaration `[font-display](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/font-display)`. La valeur `swap` indique au navigateur que le texte utilisant cette police doit être affiché immédiatement en utilisant une police système. Une fois que la police personnalisée est prête, la police système est remplacée.

Si un [navigateur ne supporte pas](https://caniuse.com/#search=font-display) `font-display`, il continue à suivre son comportement par défaut pour le chargement des polices.

#### Comportements par défaut des navigateurs si une police n'est pas prête :

**Edge** utilise une police système jusqu'à ce que la police personnalisée soit prête, puis remplace les polices.

**Chrome** masquera le texte pendant jusqu'à 3 secondes. Si le texte n'est toujours pas prêt, il utilisera une police système jusqu'à ce que la police personnalisée soit prête.

**Firefox** masquera le texte pendant jusqu'à 3 secondes. Si le texte n'est toujours pas prêt, il utilisera une police système jusqu'à ce que la police personnalisée soit prête.

**Safari** masque le texte jusqu'à ce que la police personnalisée soit prête.

### Test

Les liens suivants testent la version "standard" par rapport à la version optimisée :

* [Standard](https://fontface-test.glitch.me/)
* [Optimisée](https://fontface-test.glitch.me/index-cool.html)

#### Résultats

![Image](https://cdn-media-1.freecodecamp.org/images/euk7ucbqKnVVEECqr4GKBbM4XilA8ptLejyl)
_Comportement par défaut_

![Image](https://cdn-media-1.freecodecamp.org/images/kJGcfnbRkXKJc5M350DpjuegmAuQxdIKHkly)
_Comportement optimisé_

### Conclusion

En considérant de telles optimisations de base, vous améliorerez l'expérience utilisateur générale de votre produit numérique. Nous devons tenir compte des situations où la vitesse de connexion n'est pas optimale ou lorsque les gens n'ont pas le temps d'attendre plusieurs secondes pendant que votre application/site est complètement chargé et navigable.

De telles améliorations, surtout pour les grands projets, sont obligatoires pour améliorer l'expérience utilisateur globale, et elles ne nécessitent vraiment pas beaucoup d'efforts.

Nous devons travailler ensemble pour [essayer de réparer](https://www.oreilly.com/ideas/the-web-is-broken-lets-fix-it) le web.

#### Suivez mon blog à l'adresse suivante :

[**Mattia Astorino**](https://equinsuocha.io/)  
[_Développeur Web, ninja CSS/HTML à Monza. Membre d'Open Source Design._equinsuocha.io](https://equinsuocha.io/)