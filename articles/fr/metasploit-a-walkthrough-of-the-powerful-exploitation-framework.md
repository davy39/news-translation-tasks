---
title: Metasploit — Un guide du puissant framework d'exploitation
subtitle: ''
author: Manish Shivanandhan
co_authors: []
series: null
date: '2020-10-01T11:32:00.000Z'
originalURL: https://freecodecamp.org/news/metasploit-a-walkthrough-of-the-powerful-exploitation-framework
coverImage: https://www.freecodecamp.org/news/content/images/2020/09/wall-8.jpeg
tags:
- name: cybersecurity
  slug: cybersecurity
- name: information security
  slug: information-security
- name: '#infosec'
  slug: infosec
- name: penetration testing
  slug: penetration-testing
seo_title: Metasploit — Un guide du puissant framework d'exploitation
seo_desc: 'Metasploit can handle everything from scanning to exploitation. In this
  article, we will take a look at what makes Metasploit the most versatile penetration
  testing toolkit.

  Intro to Penetration Testing

  If you are new to penetration testing, let me e...'
---

Metasploit peut gérer tout, de l'analyse à l'exploitation. Dans cet article, nous allons examiner ce qui fait de Metasploit la boîte à outils de test d'intrusion la plus polyvalente.

# Introduction aux tests d'intrusion

Si vous êtes nouveau dans le domaine des tests d'intrusion, permettez-moi de vous expliquer ce que c'est avant de vous présenter un outil d'exploitation.

Les tests d'intrusion sont **du piratage avec permission**. Vous avez peut-être vu des hackers cool à la télévision attaquer des systèmes informatiques sans se faire prendre. Mais ce n'est pas comme ça que ça fonctionne dans le monde réel.

Si vous piratez quelqu'un sans permission, il y a de fortes chances que vous finissiez en prison. Donc, si vous prévoyez d'apprendre le piratage avec de mauvaises intentions, je ne suis pas responsable des dommages que vous causez. Tous mes articles sont purement éducatifs.

Alors, si le piratage est mauvais, pourquoi l'apprendre en premier lieu ? Chaque appareil sur Internet est vulnérable par défaut, à moins que quelqu'un ne le sécurise.

C'est le travail du testeur d'intrusion de penser comme un pirate et d'attaquer les systèmes de son organisation. Le testeur d'intrusion informe ensuite l'organisation des vulnérabilités et conseille sur la manière de les corriger.

Les tests d'intrusion sont l'un des emplois les mieux payés de l'industrie. Il y a toujours une pénurie de testeurs d'intrusion puisque le nombre d'appareils sur Internet augmente de manière exponentielle.

J'ai récemment écrit un article sur les dix meilleurs outils que vous devriez connaître en tant qu'ingénieur en cybersécurité. Si vous êtes intéressé à en savoir plus sur la cybersécurité, [consultez l'article ici](https://medium.com/manishmshiva/10-tools-you-should-know-as-a-cybersecurity-engineer-3b9809c7bbc2).

Bien. Assez de discours motivant. Regardons l'un des outils de test d'intrusion les plus cool du marché — Metasploit.

# Metasploit — Le Framework Complet

Metasploit est un framework de test d'intrusion qui vous aide à trouver et à exploiter les vulnérabilités des systèmes. Il vous donne tout ce dont vous avez besoin, des scanners aux intégrations tierces dont vous aurez besoin tout au long d'un [cycle de vie complet de test d'intrusion](https://www.freecodecamp.org/news/ethical-hacking-lifecycle-five-stages-of-a-penetration-test/).

Cela inclut la reconnaissance, l'analyse, l'exploitation, l'escalade de privilèges et le maintien de l'accès.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-25.png)

Metasploit est un framework open-source écrit en Ruby. Il est conçu pour être un framework extensible, de sorte que si vous souhaitez construire des fonctionnalités personnalisées en utilisant Ruby, vous pouvez facilement le faire via des plugins.

Rapid7, l'entreprise derrière Metasploit, propose une [version premium de Metasploit avec des fonctionnalités avancées](https://www.metasploit.com/).

Metasploit est également fréquemment mis à jour avec de nouvelles exploits publiées dans le [Common Vulnerabilities and Exposures (CVE)](https://cve.mitre.org/). Donc, si une nouvelle vulnérabilité est trouvée et publiée, vous pouvez commencer à analyser vos systèmes immédiatement.

Metasploit est livré avec des outils anti-forensiques et d'évasion intégrés. Il est également préinstallé dans le [système d'exploitation Kali](https://www.kali.org/).

# Composants

Maintenant que vous savez ce qu'est Metasploit, regardons les concepts de base de Metasploit.

Metasploit vous offre quelques composants clés pour trouver et exploiter les vulnérabilités d'un réseau. Cela inclut les exploits, les charges utiles, les auxiliaires, et ainsi de suite. Regardons chacun d'eux en détail.

## Exploits

Un exploit est un morceau de code qui tire parti d'une vulnérabilité dans un système. Ces exploits effectuent des actions spécifiques en fonction de la gravité de la vulnérabilité.

Les exploits peuvent tirer parti des vulnérabilités logicielles, des vulnérabilités matérielles, des [vulnérabilités zero-day](https://en.wikipedia.org/wiki/Zero-day_(computing)#:~:text=A%20zero%2Dday%20(also%20known,actively%20exploited%20in%20the%20wild.), et ainsi de suite. Certains des exploits courants incluent les débordements de tampon, les injections SQL, et ainsi de suite.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-24.png)

Metasploit offre un certain nombre d'exploits que vous pouvez utiliser en fonction des vulnérabilités existantes dans le système cible. Ces exploits peuvent être classés en deux types :

* **Exploits Actifs** — Les exploits actifs s'exécuteront sur un système cible, exploiteront le système, vous donneront accès ou effectueront une tâche spécifique, puis quitteront.
* **Exploits Passifs** — Les exploits passifs attendront que le système cible se connecte à l'exploit. Cette approche est souvent utilisée par les pirates sur Internet vous demandant de télécharger des fichiers ou des logiciels. Une fois que vous le faites, vous vous connectez vous-même à un exploit passif en cours d'exécution sur l'ordinateur du pirate.

## Charges utiles (Payloads)

Une charge utile est un morceau de code qui s'exécute via l'exploit. Vous utilisez des exploits pour entrer dans un système et des charges utiles pour effectuer des actions spécifiques.

Par exemple, vous pouvez utiliser un keylogger comme charge utile avec un exploit. Une fois l'exploit réussi, il installera le keylogger dans le système de la cible.

Metasploit offre une bonne collection de charges utiles comme les reverse shells, les bind shells, Meterpreter, et ainsi de suite.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-13.jpeg)

Il y a quelques charges utiles qui fonctionneront avec la majorité des exploits, mais il faut faire quelques recherches pour trouver la bonne charge utile qui fonctionnera avec l'exploit.

Une fois que vous avez choisi un exploit, vous pouvez lister les charges utiles qui fonctionneront avec cet exploit en utilisant la commande 'show payloads' dans Metasploit.

Il existe quelques types de charges utiles dans Metasploit. Ceux que vous finirez par utiliser le plus sont ces trois types :

* **Singles** — Charges utiles qui fonctionnent seules, par exemple les keyloggers.
* **Stagers** — Charges utiles qui fonctionnent avec d'autres, par exemple deux charges utiles : une pour établir une connexion avec la cible, l'autre pour exécuter une instruction.
* **Meterpreter** — Charge utile avancée qui vit dans la mémoire de la cible, difficile à tracer, et peut charger/décharger des plugins à volonté. Il y a une section ci-dessous sur Meterpreter où je l'expliquerai en détail.

## Auxiliaires

Les auxiliaires sont des modules qui vous aident à effectuer des fonctions personnalisées autres que l'exploitation d'un système. Cela inclut les scanners de ports, les fuzzers, les sniffers, et plus encore.

Par exemple, vous pouvez utiliser l'[auxiliaire CERT](https://www.offensive-security.com/metasploit-unleashed/scanner-http-auxiliary-modules/) pour vérifier les certificats SSL expirés sur un réseau. Cela est utile pour les administrateurs système afin d'automatiser la gestion des certificats.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-22.png)

Si vous êtes familier avec Ruby, vous pouvez écrire vos propres auxiliaires. Si vous souhaitez analyser un réseau pour des vulnérabilités spécifiques chaque semaine, vous pouvez écrire votre propre module auxiliaire personnalisé pour cela.

Vous pouvez ensuite l'utiliser pour analyser votre réseau au lieu d'utiliser un [scanner existant comme Nmap](https://medium.com/manishmshiva/nmap-a-guide-to-the-greatest-scanning-tool-of-all-time-3bd1a973a5e5).

# Outils

Maintenant que vous savez comment fonctionne Metasploit, regardons les outils que Metasploit offre.

## **msfconsole**

MsfConsole est l'interface par défaut pour Metasploit. Il vous donne toutes les commandes dont vous avez besoin pour interagir avec le framework Metasploit.

Il faut un peu de temps pour se familiariser avec l'interface en ligne de commande, mais une fois que vous l'avez fait, c'est facile à utiliser. De plus, MsfConsole est le seul moyen d'accéder à toutes les fonctionnalités de Metasploit.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-21.png)

MsfConsole offre également la complétion par tabulation pour les commandes courantes. Se familiariser avec MsfConsole est une étape importante dans votre parcours pour devenir un professionnel de Metasploit.

## **msfdb**

Si vous travaillez régulièrement avec de grands réseaux, il y a des chances que vous ayez besoin d'un endroit pour stocker vos données. Cela inclut les résultats des analyses, les identifiants de connexion, et ainsi de suite.

Metasploit offre un outil de gestion de base de données appelé msfdb. msfdb fonctionne sur une base de données PostgreSQL et vous donne une liste de commandes utiles pour importer et exporter vos résultats.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-20.png)

Avec msfdb, vous pouvez importer les résultats des analyses d'outils externes comme Nmap ou Nessus. Metasploit offre également une commande native db_nmap qui vous permet d'analyser et d'importer des résultats en utilisant Nmap dans la msfconsole.

## **MsfVenom**

Enfin, nous avons msfvenom (cool nom, hein ?). msfvenom vous permet de générer des charges utiles personnalisées en fonction de votre cible.

L'utilisation d'un antivirus ou d'un pare-feu peut rendre un système cible relativement sécurisé. Dans ces cas, les charges utiles Metasploit existantes peuvent ne pas fonctionner car elles sont génériques pour tous les systèmes relevant d'un système d'exploitation ou d'un service.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-19.png)

msfvenom a été construit en combinant deux anciens outils que Metasploit avait : msfpayload et msfencode. msfvenom vous permet de créer et de [encoder](https://techterms.com/definition/encoding) des charges utiles personnalisées pour vos exploits.

En fonction des informations supplémentaires que vous avez sur la cible, vous pouvez créer vos propres charges utiles pour obtenir un taux de réussite plus élevé lors de votre test d'intrusion.

# Meterpreter

Meterpreter est une charge utile avancée dans Metasploit. Contrairement aux autres charges utiles qui effectuent une fonction spécifique, Meterpreter est dynamique et peut être scripté à la volée.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-18.png)

Si vous pouvez exploiter un système et injecter Meterpreter comme charge utile, voici quelques-unes des choses que vous pouvez faire :

* Établir une communication chiffrée entre votre système et la cible.
* Extraire les hachages de mots de passe du système cible.
* Rechercher des fichiers sur le système de fichiers de la cible.
* Télécharger / Upload des fichiers.
* Prendre des instantanés de la webcam.

Meterpreter est également incroyablement furtif. Puisque Meterpreter vit dans la mémoire de la cible, il est extrêmement difficile à détecter. Il est également difficile de tracer Meterpreter à l'aide d'outils forensiques.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-17.png)

Vous pouvez écrire des scripts Meterpreter à la volée en utilisant Ruby pour effectuer des fonctions personnalisées. Meterpreter dispose également d'un module Python qui vous donne des commandes supplémentaires pour exécuter des scripts Python sur la machine cible.

# Armitage

Armitage est une interface graphique pour Metasploit, écrite en Java. Armitage est considéré comme un excellent ajout pour les testeurs d'intrusion familiers avec l'interface en ligne de commande.

![Image](https://www.freecodecamp.org/news/content/images/2020/09/1-12.jpeg)

La fonction principale d'Armitage est de visualiser les cibles et de recommander des exploits. Armitage est également scriptable, ce qui signifie que vous pouvez automatiser des tâches redondantes comme la découverte d'hôtes.

Armitage est extrêmement utile lorsque vous travaillez avec un grand nombre de systèmes dans un réseau. Vous pouvez utiliser l'interface graphique d'Armitage pour escalader les privilèges, parcourir les fichiers, extraire les hachages de mots de passe, et ainsi de suite.

# Résumé

Metasploit fournit une suite d'outils pour effectuer un audit de sécurité complet d'un réseau. Metasploit est fréquemment mis à jour avec les vulnérabilités publiées dans la base de données des vulnérabilités et exploits courants.

Vous pouvez également utiliser d'autres outils comme Nmap et Nessus avec Metasploit via des intégrations ou en important leurs rapports d'analyse dans Metasploit. Metasploit dispose également d'un outil graphique appelé Armitage qui vous permet de visualiser les cibles et de recommander des exploits.

Si vous êtes intéressé à en savoir plus sur Metasploit, [consultez le guide de référence détaillé publié par Offensive Security](https://www.offensive-security.com/metasploit-unleashed/).

_Aimé cet article ?_ [**_Rejoignez ma Newsletter_**](http://tinyletter.com/manishmshiva) _et recevez un résumé de mes articles et vidéos chaque lundi._