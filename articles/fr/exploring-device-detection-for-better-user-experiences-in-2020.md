---
title: Comment détecter le périphérique de votre utilisateur pour améliorer son expérience
  utilisateur
subtitle: ''
author: freeCodeCamp
co_authors: []
series: null
date: '2020-01-15T06:41:54.000Z'
originalURL: https://freecodecamp.org/news/exploring-device-detection-for-better-user-experiences-in-2020
coverImage: https://cdn-media-2.freecodecamp.org/w1280/5f9c9dde740569d1a4ca3a1c.jpg
tags:
- name: user experience
  slug: user-experience
seo_title: Comment détecter le périphérique de votre utilisateur pour améliorer son
  expérience utilisateur
seo_desc: 'By Leonardo Faria

  A few months ago I watched a great talk from the Chrome Dev Summit about performance
  in slow devices.

  https://youtu.be/puUPpVrIRkc

  It blew my mind all the work done by Facebook in identifying devices to create a
  better user experien...'
---

Par Leonardo Faria

Il y a quelques mois, j'ai regardé une excellente conférence du Chrome Dev Summit sur les performances des appareils lents.

%[https://youtu.be/puUPpVrIRkc]

<p>Cela m'a impressionné tout le travail réalisé par Facebook pour identifier les appareils et créer une meilleure expérience utilisateur. Aujourd'hui, j'ai décidé d'étudier un peu plus le sujet et de voir ce que je peux faire chez <a href="https://www.thinkific.com">Thinkific</a> (l'entreprise pour laquelle je travaille).</p><h2 id="agents-utilisateurs">Agents utilisateurs</h2><p>Les agents utilisateurs sont bien connus des développeurs. Nous les utilisons pour détecter les bots, rediriger les utilisateurs vers une version spécifique de notre site web ou ajouter des classes CSS à notre page afin de créer des expériences différentes.</p><p>Chez Thinkific, nous utilisons déjà le <a href="https://github.com/fnando/browser">browser Ruby gem</a> pour analyser l'agent utilisateur et obtenir des informations pertinentes (détection de bots par exemple). J'ai donc décidé de persister les principales informations dans une table visitor_device – voici le schéma :</p><div><div id="highlighter_373452" class="syntaxhighlighter nogutter code plain"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="plain plain">tenant_id: l'école du créateur de cours que le visiteur consulte</code></div><div class="line number2 index1 alt1"><code class="plain plain">raw: l'agent utilisateur brut</code></div><div class="line number3 index2 alt2"><code class="plain plain">type: desktop / mobile / tablette / bot / autre</code></div><div class="line number4 index3 alt1"><code class="plain plain">browser_name</code></div><div class="line number5 index4 alt2"><code class="plain plain">browser_version</code></div><div class="line number6 index5 alt1"><code class="plain plain">platform_name</code></div><div class="line number7 index6 alt2"><code class="plain plain">platform_version</code></div><div class="line number8 index7 alt1"><code class="plain plain">hardware: hstore contenant memory, processor, device_model, device_name</code></div><div class="line number9 index8 alt2"><code class="plain plain">connection: hstore contenant downlink_max, connection_type</code></div></div></td></tr></tbody></table></div></div><p>Vous avez probablement remarqué que certaines informations ne sont pas disponibles dans la chaîne de l'agent utilisateur. Il est temps d'utiliser de nouvelles API JavaScript :</p><h2 id="obtenir-infos-materiel-avec-javascript">Obtenir des informations matérielles avec JavaScript</h2><p>Comme mentionné dans la vidéo du Chrome Dev Summit, nous pouvons utiliser JavaScript pour obtenir ces informations.</p><h3 id="memoire">Mémoire</h3><p><code>navigator.deviceMemory</code> retournera un nombre à virgule flottante. Il y a des choses à considérer ici :</p><ul><li>Cela ne fonctionne que sur HTTPS</li><li>Le support est assez limité (basiquement Chrome uniquement)</li></ul><p>Plus d'informations :</p><ul><li><a href="https://github.com/w3c/device-memory">Spec from W3C</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/deviceMemory">MDN Docs</a></li><li><a href="https://caniuse.com/#feat=mdn-api_navigator_devicememory">Can I use deviceMemory</a></li></ul><h3 id="processeurs">Processeurs</h3><p><code>navigator.hardwareConcurrency</code> retournera le nombre de cœurs logiques du CPU de l'utilisateur. Le support pour cela est <a href="https://caniuse.com/#feat=hardwareconcurrency">décent</a>.</p><h2 id="detecter-infos-connexion-avec-javascript">Détecter les informations de connexion avec JavaScript</h2><p><code>navigator.connection</code> est une nouvelle API contenant des informations sur la connexion du système, telles que la bande passante actuelle de l'appareil de l'utilisateur ou si la connexion est mesurée. Le support est assez limité (basiquement Chrome uniquement), mais les choses sont prometteuses.</p><p>Plus d'informations :</p><ul><li><a href="https://googlechrome.github.io/samples/network-information/">Chrome example</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection">MDN Docs</a></li><li><a href="https://caniuse.com/#feat=netinfo">Can I use Network Information API</a></li></ul><h2 id="detecter-modele-appareil">Détecter le modèle de l'appareil</h2><p>L'agent utilisateur <em>peut</em> retourner certaines informations sur le nom du modèle. <a href="https://userstack.com/">userstack</a> est un service qui vous donne des informations basées sur l'agent utilisateur. Il fonctionne bien et est facile à intégrer, cependant, selon vos besoins, ils ne peuvent pas aider.</p><p>Prenons par exemple les appareils Apple. Leur agent utilisateur est essentiellement le même, donc vous ne pouvez pas différencier un iPad Pro d'un ancien iPad qui exécute la dernière version d'iOS. Pour ces cas, vous pourriez avoir besoin d'une meilleure détection basée sur la résolution, la densité de pixels et d'autres informations matérielles exposées dans le navigateur. J'ai fait quelques recherches rapides sur ce sujet et j'ai trouvé 3 produits jusqu'à présent : <a href="https://web.wurfl.io/#wurfl-js">WURFL.io</a>, <a href="https://deviceatlas.com/products/web">DeviceAtlas</a> et <a href="https://51degrees.com/">51Degrees</a>. Je n'ai pas encore eu le temps d'essayer leurs produits, mais j'ai hâte de le faire (et d'en parler).</p><h2 id="faq">FAQ</h2><p><em>Question : Pourquoi ne pas utiliser Google Analytics / Mixpanel / Kibana / New Relic / votre outil ici ?</em></p><p>Nous pourrions obtenir des informations sur le navigateur dans d'autres outils. Mais en tant que produit SaaS, nous n'utilisons pas notre propre propriété Google Analytics (les clients ajoutent la leur). De plus, les bloqueurs de publicités peuvent bloquer ces outils tiers. Enfin, en ayant ces informations de notre côté, nous pouvons mieux nous adapter.</p><p><em>Question : Avez-vous une liste d'appareils bas de gamme/haut de gamme ?</em></p><p>Non. Peut-être que cela peut être construit en combinant le nombre de processeurs et la mémoire, mais je n'ai pas investi beaucoup de temps là-dessus. Dans ce projet, mon collègue a créé un helper Rails qui déterminerait si l'utilisateur utiliserait la version lite ou par défaut d'un site web en fonction du matériel. Sur ce sujet, il est important de mentionner que Facebook a une bibliothèque pour Android appelée <a href="https://github.com/facebook/device-year-class/">Device Year Class</a>.</p>

_Aussi publié sur [mon blog](http://bit.ly/2FWop4N). Si vous aimez ce contenu, suivez-moi sur [Twitter](https://twitter.com/leozera) et [GitHub](https://github.com/leonardofaria)._

Au fait - Thinkific [recrute](https://bit.ly/thnk-senior-front-end-eng) [pour](https://bit.ly/thnk-senior-full-stack-eng) [plusieurs postes](https://www.thinkific.com/careers/) si vous êtes intéressé.